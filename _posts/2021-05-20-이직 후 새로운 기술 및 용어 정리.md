---
layout: post
title:  "이직 후 새로운 기술 및 용어 정리"
date:   2021-05-20 00:40:12
---

## 기술

---

### Kafka

> Pub-sub`Publish - Subscribe (발행/구독)`모델의 분산 메시징 시스템 (메시지 큐). 

`producer`는 `broker`를 통해 `topic`에 `event(message)`를 `publish`하고, 
`consumer`는 해당 `topic`을 `subscribe`해 `broker`에서 `event(message)`를 가져와(`poll`) 처리한다.

기존의 메시징 시스템의 경우 브로커가 컨슈머에게 데이터를 전달해주는 "Push 방식"을 채택한 경우가 많이 있지만. 카프카는 컨슈머가 브로커에게서 메시지를 가져오는 "Pull 방식"을 채택했다.

이러한 방식은 Loosely coupled, Scalable, 관심사 (interest)에 집중할 수 있다는 장점이 있다.

<br>

topic 은 여러 파티션(partition) 으로 나눠질 수 있는데, 파티션에는 메시지가 Round-robin(RR) 방식으로 쓰여진다. 순차적으로 메시지가 쓰여지지 않을 수 있다는 점을 인지하자.

가용성을 위해 Consumer group을 구성할 수 있으며, 여러 consumer가 동일한 partition 을 바라볼 수는 없다. (메시지 처리 순서 보장)

한 partition 을 담당하는 consumer 가 다운되면, group 내의 다른 consumer가 다시 처리할 수 있다, 이를 Rebalance 라고 한다. 

Zookeper 와 같은 분산 어플리케이션을 위한 코디네이션 시스템을 통해 이전에 소비했던 offset 위치를 기억하고, 혹시나 consumer가 죽었다가 다시 살아나도, 마지막으로 읽었던 위치에서 부터 다시 읽어들일 수 있다. (fail over 신뢰)

그 외 Broker, Controller broker 장애등은 [링크](https://velog.io/@jwpark06/%EC%9E%A5%EC%95%A0%EC%97%90-%EB%8C%80%EC%9D%91%ED%95%98%EB%8A%94-Kafka) 를 참고해보자.

_항상 정보가 최신일거라는 신뢰를 위한 방식의 `zero payload` 방식도 참고 해보자._

---

### Zipkin

> MSA 환경에서 어느 구간에서 이슈가 발생했는지 추적하기 위해 '분산 로그 추적 시스템' 중 하나, 트위터에서 개발 된 가장 활성화 된 오픈소스

클라이언트가 서버로 호출한 하나의 호출을 `Trace` 라고 했을 때, 서비스간의 호출을 `Span`이라고 한다. 

각 서비스 컴포넌트들은 하나의 클라이언트 호출을 추적하기 위해서 같은 `Trace Id`를 사용하고, 각 서비스간의 호출은 각각 다른 `Span Id`를 사용한다. 이렇게 함으로써 전체 트렌젝션 시간을 `Trace`로 추적이 가능하고, 각 서비스별 구간 시간은 `Span`으로 추적할 수 있다.

이 추적은 HTTP request가 들어오는 시점과 HTTP request가 다른 서비스로 나가는 부분을 랩핑하여 Trace와 Span Context를 Header 를 통해 전달하는 방식으로 처리된다.

Zipkin 라이브러리는 수집된 트렌젝션 정보를 zipkin 서버의 collector 모듈로 전송한다. 이 때 다양한 프로토콜을 사용할 수 있는데, 일반적으로 HTTP를 사용하고, 시스템의 규모가 클 경우에는 Kafka 큐를 넣어서 Kafka 프로토콜로 전송이 가능하다.

In-memory, MySQL, Cassandra, Elastic Search 스토리지를 사용할 수 있다.

_driver = noop 등 옵션들을 살펴볼 것,  cassandra (카산드라 부하 방지를 위해 kafka 로 쏘는 등의 처리 가능) 도 !_

----

- api gateway
- saga pattern, hexagonal
- lottie
- consul
- fluentd
- envoy
- sidecar
- service mesh, spring cloud nteflix
- sail
- rancher
- datadog
- newrelic
- harbor
-l4,l7
-nexus
- on demand


<br><br>

## AWS Service

---

- EBS EFS S3(ES ?) (https://seohyun0120.tistory.com/entry/AWS-EBS-vs-EFS-vs-S3-%EC%B0%A8%EC%9D%B4%EC%A0%90-%EC%96%B4%EB%8A%90-%EC%8A%A4%ED%86%A0%EB%A6%AC%EC%A7%80%EB%A5%BC-%EC%8D%A8%EC%95%BC%ED%95%A0%EA%B9%8C)
- ECR
- ECS (https://waspro.tistory.com/428)
- Redshift
- aurora, dynamo, document db
- on demand ec2
- elastic cache
- IAM
- Codebuild, CodeDeploy
- filebeat, elastic search, kibana, logstash
  - kibana index pattern
  - elk, efk
- dms

<br><br>

## 여러 용어

---

- 아젠다
- MVP
- TF


<br>

_참고_
- Kafka
  - _https://bcho.tistory.com/1016_
  - _https://medium.com/@umanking/%EC%B9%B4%ED%94%84%EC%B9%B4%EC%97%90-%EB%8C%80%ED%95%B4%EC%84%9C-%EC%9D%B4%EC%95%BC%EA%B8%B0-%ED%95%98%EA%B8%B0%EC%A0%84%EC%97%90-%EB%A8%BC%EC%A0%80-data%EC%97%90-%EB%8C%80%ED%95%B4%EC%84%9C-%EC%9D%B4%EC%95%BC%EA%B8%B0%ED%95%B4%EB%B3%B4%EC%9E%90-d2e3ca2f3c2_
  - _https://sowhat4.tistory.com/71_
  - _https://velog.io/@jwpark06/%EC%9E%A5%EC%95%A0%EC%97%90-%EB%8C%80%EC%9D%91%ED%95%98%EB%8A%94-Kafka_
<br><br><br>
