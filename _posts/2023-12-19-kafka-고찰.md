---
layout: post
title:  "Kafka 사용에 대한 고찰"
date:   2023-12-19 00:40:12
---

## Kafka 를 사용하면서 발생한 문제에 대한 고찰

대규모 서비스를 개편하면서 카프카를 통한 이벤트 발행 방식을 더욱 활발하게 사용하기로 했다.

이전엔 대부분의 구조가 API 를 통한 Ack 전달, 또는 사용처에서의 Api 기반 polling 방식이 대부분이었다.

MSA 환경에서 여러 관심사 별로 마이크로 서비스들이 생기고, 서비스들이 많아질 수록 해당 서비스들에 대한 강한 의존성이 생기기 마련이다.

데이터를 매번 각 서비스에게 전달해줘야했고, 이 분산 서비스 구조 사이의 데이터 전달 과정에서의 트랜잭션 핸들링마저 핸들링 되기 시작한다.

동기 방식이 꼭 필요한 상황에선 Saga pattern, 2PC 과 같은 형태를 구성해야겠지만 일반 커머스 플랫폼에선 이런 강한 트랜잭션이 필요한 행위는 많이 없는 것 같다. 
